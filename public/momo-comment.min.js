var momo=(function(){"use strict";var rr=Array.isArray,Zn=Array.prototype.indexOf,Qe=Array.prototype.includes,It=Array.from,Xn=Object.defineProperty,et=Object.getOwnPropertyDescriptor,zr=Object.getOwnPropertyDescriptors,Qn=Object.prototype,el=Array.prototype,nr=Object.getPrototypeOf,Lr=Object.isExtensible;const tl=()=>{};function rl(e){return e()}function lr(e){for(var t=0;t<e.length;t++)e[t]()}function qr(){var e,t,r=new Promise((n,l)=>{e=n,t=l});return{promise:r,resolve:e,reject:t}}const V=2,ct=4,dt=8,Ur=1<<24,Ee=16,de=32,Le=64,jr=128,oe=512,L=1024,Y=2048,ve=4096,Q=8192,Se=16384,vt=32768,tt=65536,Hr=1<<17,Vr=1<<18,rt=1<<19,Kr=1<<20,Re=1<<25,qe=65536,ir=1<<21,or=1<<22,Fe=1<<23,nt=Symbol("$state"),nl=Symbol("legacy props"),ll=Symbol(""),Ue=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Br(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function il(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ol(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function sl(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function al(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fl(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ul(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function cl(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function dl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ml(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const pl=1,_l=2,bl=16,gl=2,yl=4,wl=8,xl=1,El=2,K=Symbol(),Wr="http://www.w3.org/1999/xhtml";function Sl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Yr(e){return e===this.v}function kl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Gr(e){return!kl(e,this.v)}let lt=!1,so=!1;function Tl(){lt=!0}let M=null;function it(e){M=e}function sr(e,t=!1,r){M={p:M,i:!1,c:null,e:null,s:e,x:null,l:lt&&!t?{s:null,u:null,$:[]}:null}}function ar(e){var t=M,r=t.e;if(r!==null){t.e=null;for(var n of r)bn(n)}return t.i=!0,M=t.p,{}}function ht(){return!lt||M!==null&&M.l===null}let je=[];function $r(){var e=je;je=[],lr(e)}function He(e){if(je.length===0&&!mt){var t=je;queueMicrotask(()=>{t===je&&$r()})}je.push(e)}function Al(){for(;je.length>0;)$r()}function Jr(e){var t=C;if(t===null)return k.f|=Fe,e;if((t.f&vt)===0&&(t.f&ct)===0)throw e;ot(e,t)}function ot(e,t){for(;t!==null;){if((t.f&jr)!==0){if((t.f&vt)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const Cl=-7169;function O(e,t){e.f=e.f&Cl|t}function fr(e){(e.f&oe)!==0||e.deps===null?O(e,L):O(e,ve)}function Zr(e){if(e!==null)for(const t of e)(t.f&V)===0||(t.f&qe)===0||(t.f^=qe,Zr(t.deps))}function Xr(e,t,r){(e.f&Y)!==0?t.add(e):(e.f&ve)!==0&&r.add(e),Zr(e.deps),O(e,L)}const Mt=new Set;let R=null,ur=null,he=null,J=[],Nt=null,cr=!1,mt=!1;class De{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#i=0;#o=null;#n=new Set;#r=new Set;#l=new Map;is_fork=!1;#a=!1;is_deferred(){return this.is_fork||this.#i>0}skip_effect(t){this.#l.has(t)||this.#l.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#l.get(t);if(r){this.#l.delete(t);for(var n of r.d)O(n,Y),me(n);for(n of r.m)O(n,ve),me(n)}}process(t){J=[],this.apply();var r=[],n=[];for(const l of t)this.#f(l,r,n);if(this.is_deferred()){this.#u(n),this.#u(r);for(const[l,i]of this.#l)nn(l,i)}else{for(const l of this.#t)l();this.#t.clear(),this.#e===0&&this.#c(),ur=this,R=null,en(n),en(r),ur=null,this.#o?.resolve()}he=null}#f(t,r,n){t.f^=L;for(var l=t.first,i=null;l!==null;){var o=l.f,s=(o&(de|Le))!==0,f=s&&(o&L)!==0,a=f||(o&Q)!==0||this.#l.has(l);if(!a&&l.fn!==null){s?l.f^=L:i!==null&&(o&(ct|dt|Ur))!==0?i.b.defer_effect(l):(o&ct)!==0?r.push(l):gt(l)&&((o&Ee)!==0&&this.#r.add(l),ft(l));var h=l.first;if(h!==null){l=h;continue}}var u=l.parent;for(l=l.next;l===null&&u!==null;)u===i&&(i=null),l=u.next,u=u.parent}}#u(t){for(var r=0;r<t.length;r+=1)Xr(t[r],this.#n,this.#r)}capture(t,r){r!==K&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Fe)===0&&(this.current.set(t,t.v),he?.set(t,t.v))}activate(){R=this,this.apply()}deactivate(){R===this&&(R=null,he=null)}flush(){if(this.activate(),J.length>0){if(Qr(),R!==null&&R!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#s)t(this);this.#s.clear()}#c(){if(Mt.size>1){this.previous.clear();var t=he,r=!0;for(const l of Mt){if(l===this){r=!1;continue}const i=[];for(const[s,f]of this.current){if(l.current.has(s))if(r&&f!==l.current.get(s))l.current.set(s,f);else continue;i.push(s)}if(i.length===0)continue;const o=[...l.current.keys()].filter(s=>!this.current.has(s));if(o.length>0){var n=J;J=[];const s=new Set,f=new Map;for(const a of i)tn(a,o,s,f);if(J.length>0){R=l,l.apply();for(const a of J)l.#f(a,[],[]);l.deactivate()}J=n}}R=null,he=t}this.committed=!0,Mt.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#a&&(this.#a=!0,He(()=>{this.#a=!1,this.is_deferred()?J.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#n)this.#r.delete(t),O(t,Y),me(t);for(const t of this.#r)O(t,ve),me(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#s.add(t)}settled(){return(this.#o??=qr()).promise}static ensure(){if(R===null){const t=R=new De;Mt.add(R),mt||He(()=>{R===t&&t.flush()})}return R}apply(){}}function Rl(e){var t=mt;mt=!0;try{for(var r;;){if(Al(),J.length===0&&(R?.flush(),J.length===0))return Nt=null,r;Qr()}}finally{mt=t}}function Qr(){cr=!0;var e=null;try{for(var t=0;J.length>0;){var r=De.ensure();if(t++>1e3){var n,l;Fl()}r.process(J),Ie.clear()}}finally{J=[],cr=!1,Nt=null}}function Fl(){try{ul()}catch(e){ot(e,Nt)}}let ke=null;function en(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Se|Q))===0&&gt(n)&&(ke=new Set,ft(n),n.deps===null&&n.first===null&&n.nodes===null&&n.teardown===null&&n.ac===null&&xn(n),ke?.size>0)){Ie.clear();for(const l of ke){if((l.f&(Se|Q))!==0)continue;const i=[l];let o=l.parent;for(;o!==null;)ke.has(o)&&(ke.delete(o),i.push(o)),o=o.parent;for(let s=i.length-1;s>=0;s--){const f=i[s];(f.f&(Se|Q))===0&&ft(f)}}ke.clear()}}ke=null}}function tn(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const l of e.reactions){const i=l.f;(i&V)!==0?tn(l,t,r,n):(i&(or|Ee))!==0&&(i&Y)===0&&rn(l,t,n)&&(O(l,Y),me(l))}}function rn(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const l of e.deps){if(Qe.call(t,l))return!0;if((l.f&V)!==0&&rn(l,t,r))return r.set(l,!0),!0}return r.set(e,!1),!1}function me(e){for(var t=Nt=e;t.parent!==null;){t=t.parent;var r=t.f;if(cr&&t===C&&(r&Ee)!==0&&(r&Vr)===0)return;if((r&(Le|de))!==0){if((r&L)===0)return;t.f^=L}}J.push(t)}function nn(e,t){if(!((e.f&de)!==0&&(e.f&L)!==0)){(e.f&Y)!==0?t.d.push(e):(e.f&ve)!==0&&t.m.push(e),O(e,L);for(var r=e.first;r!==null;)nn(r,t),r=r.next}}function Dl(e){let t=0,r=Ve(0),n;return()=>{pr()&&(v(r),gn(()=>(t===0&&(n=b(()=>e(()=>_t(r)))),t+=1,()=>{He(()=>{t-=1,t===0&&(n?.(),n=void 0,_t(r))})})))}}var Il=tt|rt|jr;function Ml(e,t,r){new Nl(e,t,r)}class Nl{parent;is_pending=!1;#t;#s=null;#e;#i;#o;#n=null;#r=null;#l=null;#a=null;#f=null;#u=0;#c=0;#h=!1;#v=!1;#m=new Set;#p=new Set;#d=null;#w=Dl(()=>(this.#d=Ve(this.#u),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#e=r,this.#i=n,this.parent=C.b,this.is_pending=!!this.#e.pending,this.#o=br(()=>{C.b=this;{var l=this.#g();try{this.#n=se(()=>n(l))}catch(i){this.error(i)}this.#c>0?this.#b():this.is_pending=!1}return()=>{this.#f?.remove()}},Il)}#x(){try{this.#n=se(()=>this.#i(this.#t))}catch(t){this.error(t)}}#E(){const t=this.#e.pending;t&&(this.#r=se(()=>t(this.#t)),He(()=>{var r=this.#g();this.#n=this.#_(()=>(De.ensure(),se(()=>this.#i(r)))),this.#c>0?this.#b():(Be(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#g(){var t=this.#t;return this.is_pending&&(this.#f=Ke(),this.#t.before(this.#f),t=this.#f),t}defer_effect(t){Xr(t,this.#m,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#_(t){var r=C,n=k,l=M;ge(this.#o),ae(this.#o),it(this.#o.ctx);try{return t()}catch(i){return Jr(i),null}finally{ge(r),ae(n),it(l)}}#b(){const t=this.#e.pending;this.#n!==null&&(this.#a=document.createDocumentFragment(),this.#a.append(this.#f),kn(this.#n,this.#a)),this.#r===null&&(this.#r=se(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#c+=t,this.#c===0){this.is_pending=!1;for(const r of this.#m)O(r,Y),me(r);for(const r of this.#p)O(r,ve),me(r);this.#m.clear(),this.#p.clear(),this.#r&&Be(this.#r,()=>{this.#r=null}),this.#a&&(this.#t.before(this.#a),this.#a=null)}}update_pending_count(t){this.#y(t),this.#u+=t,!(!this.#d||this.#h)&&(this.#h=!0,He(()=>{this.#h=!1,this.#d&&st(this.#d,this.#u)}))}get_effect_pending(){return this.#w(),v(this.#d)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(this.#v||!r&&!n)throw t;this.#n&&(Z(this.#n),this.#n=null),this.#r&&(Z(this.#r),this.#r=null),this.#l&&(Z(this.#l),this.#l=null);var l=!1,i=!1;const o=()=>{if(l){Sl();return}l=!0,i&&ml(),De.ensure(),this.#u=0,this.#l!==null&&Be(this.#l,()=>{this.#l=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#_(()=>(this.#v=!1,se(()=>this.#i(this.#t)))),this.#c>0?this.#b():this.is_pending=!1};He(()=>{try{i=!0,r?.(t,o),i=!1}catch(s){ot(s,this.#o&&this.#o.parent)}n&&(this.#l=this.#_(()=>{De.ensure(),this.#v=!0;try{return se(()=>{n(this.#t,()=>t,()=>o)})}catch(s){return ot(s,this.#o.parent),null}finally{this.#v=!1}}))})}}function Pl(e,t,r,n){const l=ht()?Pt:vr;var i=e.filter(d=>!d.settled);if(r.length===0&&i.length===0){n(t.map(l));return}var o=R,s=C,f=Ol(),a=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(d=>d.promise)):null;function h(d){f();try{n(d)}catch(m){(s.f&Se)===0&&ot(m,s)}o?.deactivate(),dr()}if(r.length===0){a.then(()=>h(t.map(l)));return}function u(){f(),Promise.all(r.map(d=>zl(d))).then(d=>h([...t.map(l),...d])).catch(d=>ot(d,s))}a?a.then(u):u()}function Ol(){var e=C,t=k,r=M,n=R;return function(i=!0){ge(e),ae(t),it(r),i&&n?.activate()}}function dr(){ge(null),ae(null),it(null)}function Pt(e){var t=V|Y,r=k!==null&&(k.f&V)!==0?k:null;return C!==null&&(C.f|=rt),{ctx:M,deps:null,effects:null,equals:Yr,f:t,fn:e,reactions:null,rv:0,v:K,wv:0,parent:r??C,ac:null}}function zl(e,t,r){let n=C;n===null&&il();var l=n.b,i=void 0,o=Ve(K),s=!k,f=new Map;return Xl(()=>{var a=qr();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{h===R&&h.committed&&h.deactivate(),dr()})}catch(m){a.reject(m),dr()}var h=R;if(s){var u=l.is_rendered();l.update_pending_count(1),h.increment(u),f.get(h)?.reject(Ue),f.delete(h),f.set(h,a)}const d=(m,c=void 0)=>{if(h.activate(),c)c!==Ue&&(o.f|=Fe,st(o,c));else{(o.f&Fe)!==0&&(o.f^=Fe),st(o,m);for(const[_,w]of f){if(f.delete(_),_===h)break;w.reject(Ue)}}s&&(l.update_pending_count(-1),h.decrement(u))};a.promise.then(d,m=>d(null,m||"unknown"))}),_n(()=>{for(const a of f.values())a.reject(Ue)}),new Promise(a=>{function h(u){function d(){u===i?a(o):h(i)}u.then(d,d)}h(i)})}function pt(e){const t=Pt(e);return An(t),t}function vr(e){const t=Pt(e);return t.equals=Gr,t}function Ll(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Z(t[r])}}function ql(e){for(var t=e.parent;t!==null;){if((t.f&V)===0)return(t.f&Se)===0?t:null;t=t.parent}return null}function hr(e){var t,r=C;ge(ql(e));try{e.f&=~qe,Ll(e),t=In(e)}finally{ge(r)}return t}function ln(e){var t=hr(e);if(!e.equals(t)&&(e.wv=Fn(),(!R?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){O(e,L);return}Pe||(he!==null?(pr()||R?.is_fork)&&he.set(e,t):fr(e))}function Ul(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(Ue),t.teardown=tl,t.ac=null,yt(t,0),gr(t))}function on(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&ft(t)}let mr=new Set;const Ie=new Map;let sn=!1;function Ve(e,t){var r={f:0,v:e,reactions:null,equals:Yr,rv:0,wv:0};return r}function Me(e,t){const r=Ve(e);return An(r),r}function q(e,t=!1,r=!0){const n=Ve(e);return t||(n.equals=Gr),lt&&r&&M!==null&&M.l!==null&&(M.l.s??=[]).push(n),n}function E(e,t,r=!1){k!==null&&(!pe||(k.f&Hr)!==0)&&ht()&&(k.f&(V|Ee|or|Hr))!==0&&(fe===null||!Qe.call(fe,e))&&hl();let n=r?at(t):t;return st(e,n)}function st(e,t){if(!e.equals(t)){var r=e.v;Pe?Ie.set(e,t):Ie.set(e,r),e.v=t;var n=De.ensure();if(n.capture(e,r),(e.f&V)!==0){const l=e;(e.f&Y)!==0&&hr(l),fr(l)}e.wv=Fn(),an(e,Y),ht()&&C!==null&&(C.f&L)!==0&&(C.f&(de|Le))===0&&(ue===null?ei([e]):ue.push(e)),!n.is_fork&&mr.size>0&&!sn&&jl()}return t}function jl(){sn=!1;for(const e of mr)(e.f&L)!==0&&O(e,ve),gt(e)&&ft(e);mr.clear()}function Hl(e,t=1){var r=v(e),n=t===1?r++:r--;return E(e,r),n}function _t(e){E(e,e.v+1)}function an(e,t){var r=e.reactions;if(r!==null)for(var n=ht(),l=r.length,i=0;i<l;i++){var o=r[i],s=o.f;if(!(!n&&o===C)){var f=(s&Y)===0;if(f&&O(o,t),(s&V)!==0){var a=o;he?.delete(a),(s&qe)===0&&(s&oe&&(o.f|=qe),an(a,ve))}else f&&((s&Ee)!==0&&ke!==null&&ke.add(o),me(o))}}}function at(e){if(typeof e!="object"||e===null||nt in e)return e;const t=nr(e);if(t!==Qn&&t!==el)return e;var r=new Map,n=rr(e),l=Me(0),i=Ye,o=s=>{if(Ye===i)return s();var f=k,a=Ye;ae(null),Rn(i);var h=s();return ae(f),Rn(a),h};return n&&r.set("length",Me(e.length)),new Proxy(e,{defineProperty(s,f,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&dl();var h=r.get(f);return h===void 0?o(()=>{var u=Me(a.value);return r.set(f,u),u}):E(h,a.value,!0),!0},deleteProperty(s,f){var a=r.get(f);if(a===void 0){if(f in s){const h=o(()=>Me(K));r.set(f,h),_t(l)}}else E(a,K),_t(l);return!0},get(s,f,a){if(f===nt)return e;var h=r.get(f),u=f in s;if(h===void 0&&(!u||et(s,f)?.writable)&&(h=o(()=>{var m=at(u?s[f]:K),c=Me(m);return c}),r.set(f,h)),h!==void 0){var d=v(h);return d===K?void 0:d}return Reflect.get(s,f,a)},getOwnPropertyDescriptor(s,f){var a=Reflect.getOwnPropertyDescriptor(s,f);if(a&&"value"in a){var h=r.get(f);h&&(a.value=v(h))}else if(a===void 0){var u=r.get(f),d=u?.v;if(u!==void 0&&d!==K)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return a},has(s,f){if(f===nt)return!0;var a=r.get(f),h=a!==void 0&&a.v!==K||Reflect.has(s,f);if(a!==void 0||C!==null&&(!h||et(s,f)?.writable)){a===void 0&&(a=o(()=>{var d=h?at(s[f]):K,m=Me(d);return m}),r.set(f,a));var u=v(a);if(u===K)return!1}return h},set(s,f,a,h){var u=r.get(f),d=f in s;if(n&&f==="length")for(var m=a;m<u.v;m+=1){var c=r.get(m+"");c!==void 0?E(c,K):m in s&&(c=o(()=>Me(K)),r.set(m+"",c))}if(u===void 0)(!d||et(s,f)?.writable)&&(u=o(()=>Me(void 0)),E(u,at(a)),r.set(f,u));else{d=u.v!==K;var _=o(()=>at(a));E(u,_)}var w=Reflect.getOwnPropertyDescriptor(s,f);if(w?.set&&w.set.call(h,a),!d){if(n&&typeof f=="string"){var T=r.get("length"),x=Number(f);Number.isInteger(x)&&x>=T.v&&E(T,x+1)}_t(l)}return!0},ownKeys(s){v(l);var f=Reflect.ownKeys(s).filter(u=>{var d=r.get(u);return d===void 0||d.v!==K});for(var[a,h]of r)h.v!==K&&!(a in s)&&f.push(a);return f},setPrototypeOf(){vl()}})}var fn,un,cn,dn;function Vl(){if(fn===void 0){fn=window,un=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;cn=et(t,"firstChild").get,dn=et(t,"nextSibling").get,Lr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Lr(r)&&(r.__t=void 0)}}function Ke(e=""){return document.createTextNode(e)}function Ne(e){return cn.call(e)}function bt(e){return dn.call(e)}function g(e,t){return Ne(e)}function Kl(e,t=!1){{var r=Ne(e);return r instanceof Comment&&r.data===""?bt(r):r}}function F(e,t=1,r=!1){let n=e;for(;t--;)n=bt(n);return n}function Bl(e){e.textContent=""}function vn(){return!1}function hn(e,t,r){return document.createElementNS(Wr,e,void 0)}let mn=!1;function Wl(){mn||(mn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Ot(e){var t=k,r=C;ae(null),ge(null);try{return e()}finally{ae(t),ge(r)}}function Yl(e,t,r,n=r){e.addEventListener(t,()=>Ot(r));const l=e.__on_r;l?e.__on_r=()=>{l(),n(!0)}:e.__on_r=()=>n(!0),Wl()}function pn(e){C===null&&(k===null&&fl(),al()),Pe&&sl()}function Gl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function be(e,t,r){var n=C;n!==null&&(n.f&Q)!==0&&(e|=Q);var l={ctx:M,deps:null,nodes:null,f:e|Y|oe,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{ft(l)}catch(s){throw Z(l),s}else t!==null&&me(l);var i=l;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&rt)===0&&(i=i.first,(e&Ee)!==0&&(e&tt)!==0&&i!==null&&(i.f|=tt)),i!==null&&(i.parent=n,n!==null&&Gl(i,n),k!==null&&(k.f&V)!==0&&(e&Le)===0)){var o=k;(o.effects??=[]).push(i)}return l}function pr(){return k!==null&&!pe}function _n(e){const t=be(dt,null,!1);return O(t,L),t.teardown=e,t}function _r(e){pn();var t=C.f,r=!k&&(t&de)!==0&&(t&vt)===0;if(r){var n=M;(n.e??=[]).push(e)}else return bn(e)}function bn(e){return be(ct|Kr,e,!1)}function $l(e){return pn(),be(dt|Kr,e,!0)}function Jl(e){De.ensure();const t=be(Le|rt,e,!0);return(r={})=>new Promise(n=>{r.outro?Be(t,()=>{Z(t),n(void 0)}):(Z(t),n(void 0))})}function Zl(e){return be(ct,e,!1)}function Xl(e){return be(or|rt,e,!0)}function gn(e,t=0){return be(dt|t,e,!0)}function G(e,t=[],r=[],n=[]){Pl(n,t,r,l=>{be(dt,()=>e(...l.map(v)),!0)})}function br(e,t=0){var r=be(Ee|t,e,!0);return r}function se(e){return be(de|rt,e,!0)}function yn(e){var t=e.teardown;if(t!==null){const r=Pe,n=k;Tn(!0),ae(null);try{t.call(null)}finally{Tn(r),ae(n)}}}function gr(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const l=r.ac;l!==null&&Ot(()=>{l.abort(Ue)});var n=r.next;(r.f&Le)!==0?r.parent=null:Z(r,t),r=n}}function Ql(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&de)===0&&Z(t),t=r}}function Z(e,t=!0){var r=!1;(t||(e.f&Vr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(wn(e.nodes.start,e.nodes.end),r=!0),gr(e,t&&!r),yt(e,0),O(e,Se);var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)i.stop();yn(e);var l=e.parent;l!==null&&l.first!==null&&xn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function wn(e,t){for(;e!==null;){var r=e===t?null:bt(e);e.remove(),e=r}}function xn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Be(e,t,r=!0){var n=[];En(e,n,!0);var l=()=>{r&&Z(e),t&&t()},i=n.length;if(i>0){var o=()=>--i||l();for(var s of n)s.out(o)}else l()}function En(e,t,r){if((e.f&Q)===0){e.f^=Q;var n=e.nodes&&e.nodes.t;if(n!==null)for(const s of n)(s.is_global||r)&&t.push(s);for(var l=e.first;l!==null;){var i=l.next,o=(l.f&tt)!==0||(l.f&de)!==0&&(e.f&Ee)!==0;En(l,t,o?r:!1),l=i}}}function yr(e){Sn(e,!0)}function Sn(e,t){if((e.f&Q)!==0){e.f^=Q,(e.f&L)===0&&(O(e,Y),me(e));for(var r=e.first;r!==null;){var n=r.next,l=(r.f&tt)!==0||(r.f&de)!==0;Sn(r,l?t:!1),r=n}var i=e.nodes&&e.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function kn(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var l=r===n?null:bt(r);t.append(r),r=l}}let zt=!1,Pe=!1;function Tn(e){Pe=e}let k=null,pe=!1;function ae(e){k=e}let C=null;function ge(e){C=e}let fe=null;function An(e){k!==null&&(fe===null?fe=[e]:fe.push(e))}let X=null,ee=0,ue=null;function ei(e){ue=e}let Cn=1,We=0,Ye=We;function Rn(e){Ye=e}function Fn(){return++Cn}function gt(e){var t=e.f;if((t&Y)!==0)return!0;if(t&V&&(e.f&=~qe),(t&ve)!==0){for(var r=e.deps,n=r.length,l=0;l<n;l++){var i=r[l];if(gt(i)&&ln(i),i.wv>e.wv)return!0}(t&oe)!==0&&he===null&&O(e,L)}return!1}function Dn(e,t,r=!0){var n=e.reactions;if(n!==null&&!(fe!==null&&Qe.call(fe,e)))for(var l=0;l<n.length;l++){var i=n[l];(i.f&V)!==0?Dn(i,t,!1):t===i&&(r?O(i,Y):(i.f&L)!==0&&O(i,ve),me(i))}}function In(e){var t=X,r=ee,n=ue,l=k,i=fe,o=M,s=pe,f=Ye,a=e.f;X=null,ee=0,ue=null,k=(a&(de|Le))===0?e:null,fe=null,it(e.ctx),pe=!1,Ye=++We,e.ac!==null&&(Ot(()=>{e.ac.abort(Ue)}),e.ac=null);try{e.f|=ir;var h=e.fn,u=h();e.f|=vt;var d=e.deps,m=R?.is_fork;if(X!==null){var c;if(m||yt(e,ee),d!==null&&ee>0)for(d.length=ee+X.length,c=0;c<X.length;c++)d[ee+c]=X[c];else e.deps=d=X;if(pr()&&(e.f&oe)!==0)for(c=ee;c<d.length;c++)(d[c].reactions??=[]).push(e)}else!m&&d!==null&&ee<d.length&&(yt(e,ee),d.length=ee);if(ht()&&ue!==null&&!pe&&d!==null&&(e.f&(V|ve|Y))===0)for(c=0;c<ue.length;c++)Dn(ue[c],e);if(l!==null&&l!==e){if(We++,l.deps!==null)for(let _=0;_<r;_+=1)l.deps[_].rv=We;if(t!==null)for(const _ of t)_.rv=We;ue!==null&&(n===null?n=ue:n.push(...ue))}return(e.f&Fe)!==0&&(e.f^=Fe),u}catch(_){return Jr(_)}finally{e.f^=ir,X=t,ee=r,ue=n,k=l,fe=i,it(o),pe=s,Ye=f}}function ti(e,t){let r=t.reactions;if(r!==null){var n=Zn.call(r,e);if(n!==-1){var l=r.length-1;l===0?r=t.reactions=null:(r[n]=r[l],r.pop())}}if(r===null&&(t.f&V)!==0&&(X===null||!Qe.call(X,t))){var i=t;(i.f&oe)!==0&&(i.f^=oe,i.f&=~qe),fr(i),Ul(i),yt(i,0)}}function yt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ti(e,r[n])}function ft(e){var t=e.f;if((t&Se)===0){O(e,L);var r=C,n=zt;C=e,zt=!0;try{(t&(Ee|Ur))!==0?Ql(e):gr(e),yn(e);var l=In(e);e.teardown=typeof l=="function"?l:null,e.wv=Cn;var i}finally{zt=n,C=r}}}async function ri(){await Promise.resolve(),Rl()}function v(e){var t=e.f,r=(t&V)!==0;if(k!==null&&!pe){var n=C!==null&&(C.f&Se)!==0;if(!n&&(fe===null||!Qe.call(fe,e))){var l=k.deps;if((k.f&ir)!==0)e.rv<We&&(e.rv=We,X===null&&l!==null&&l[ee]===e?ee++:X===null?X=[e]:X.push(e));else{(k.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[k]:Qe.call(i,k)||i.push(k)}}}if(Pe&&Ie.has(e))return Ie.get(e);if(r){var o=e;if(Pe){var s=o.v;return((o.f&L)===0&&o.reactions!==null||Nn(o))&&(s=hr(o)),Ie.set(o,s),s}var f=(o.f&oe)===0&&!pe&&k!==null&&(zt||(k.f&oe)!==0),a=(o.f&vt)===0;gt(o)&&(f&&(o.f|=oe),ln(o)),f&&!a&&(on(o),Mn(o))}if(he?.has(e))return he.get(e);if((e.f&Fe)!==0)throw e.v;return e.v}function Mn(e){if(e.f|=oe,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&V)!==0&&(t.f&oe)===0&&(on(t),Mn(t))}function Nn(e){if(e.v===K)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ie.has(t)||(t.f&V)!==0&&Nn(t))return!0;return!1}function b(e){var t=pe;try{return pe=!0,e()}finally{pe=t}}function D(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(nt in e)wr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&nt in r&&wr(r)}}}function wr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{wr(e[n],t)}catch{}const r=nr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=zr(r);for(let l in n){const i=n[l].get;if(i)try{i.call(e)}catch{}}}}}const ni=["touchstart","touchmove"];function li(e){return ni.includes(e)}const ii=Symbol("events"),oi=new Set,Pn=new Set;function si(e,t,r,n={}){function l(i){if(n.capture||xr.call(t,i),!i.cancelBubble)return Ot(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?He(()=>{t.addEventListener(e,l,n)}):t.addEventListener(e,l,n),l}function Ge(e,t,r,n,l){var i={capture:n,passive:l},o=si(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&_n(()=>{t.removeEventListener(e,o,i)})}let On=null;function xr(e){var t=this,r=t.ownerDocument,n=e.type,l=e.composedPath?.()||[],i=l[0]||e.target;On=e;var o=0,s=On===e&&e.__root;if(s){var f=l.indexOf(s);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var a=l.indexOf(t);if(a===-1)return;f<=a&&(o=f)}if(i=l[o]||e.target,i!==t){Xn(e,"currentTarget",{configurable:!0,get(){return i||r}});var h=k,u=C;ae(null),ge(null);try{for(var d,m=[];i!==null;){var c=i.assignedSlot||i.parentNode||i.host||null;try{var _=i[ii]?.[n];_!=null&&(!i.disabled||e.target===i)&&_.call(i,e)}catch(w){d?m.push(w):d=w}if(e.cancelBubble||c===t||c===null)break;i=c}if(d){for(let w of m)queueMicrotask(()=>{throw w});throw d}}finally{e.__root=t,delete e.currentTarget,ae(h),ge(u)}}}const ai=globalThis?.window?.trustedTypes?.createPolicy("svelte-trusted-html",{createHTML:e=>e});function fi(e){return ai?.createHTML(e)??e}function zn(e,t=!1){var r=hn("template");return e=e.replaceAll("<!>","<!---->"),r.innerHTML=t?fi(e):e,r.content}function Er(e,t){var r=C;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function U(e,t){var r=(t&xl)!==0,n=(t&El)!==0,l,i=!e.startsWith("<!>");return()=>{l===void 0&&(l=zn(i?e:"<!>"+e,!0),r||(l=Ne(l)));var o=n||un?document.importNode(l,!0):l.cloneNode(!0);if(r){var s=Ne(o),f=o.lastChild;Er(s,f)}else Er(o,o);return o}}function j(e,t){e!==null&&e.before(t)}function N(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function ui(e,t){return ci(e,t)}const Lt=new Map;function ci(e,{target:t,anchor:r,props:n={},events:l,context:i,intro:o=!0}){Vl();var s=new Set,f=u=>{for(var d=0;d<u.length;d++){var m=u[d];if(!s.has(m)){s.add(m);var c=li(m);for(const T of[t,document]){var _=Lt.get(T);_===void 0&&(_=new Map,Lt.set(T,_));var w=_.get(m);w===void 0?(T.addEventListener(m,xr,{passive:c}),_.set(m,1)):_.set(m,w+1)}}}};f(It(oi)),Pn.add(f);var a=void 0,h=Jl(()=>{var u=r??t.appendChild(Ke());return Ml(u,{pending:()=>{}},d=>{sr({});var m=M;i&&(m.c=i),l&&(n.$$events=l),a=e(d,n)||{},ar()}),()=>{for(var d of s)for(const _ of[t,document]){var m=Lt.get(_),c=m.get(d);--c==0?(_.removeEventListener(d,xr),m.delete(d),m.size===0&&Lt.delete(_)):m.set(d,c)}Pn.delete(f),u!==r&&u.parentNode?.removeChild(u)}});return di.set(a,h),a}let di=new WeakMap;class vi{anchor;#t=new Map;#s=new Map;#e=new Map;#i=new Set;#o=!0;constructor(t,r=!0){this.anchor=t,this.#o=r}#n=()=>{var t=R;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#s.get(r);if(n)yr(n),this.#i.delete(r);else{var l=this.#e.get(r);l&&(this.#s.set(r,l.effect),this.#e.delete(r),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),n=l.effect)}for(const[i,o]of this.#t){if(this.#t.delete(i),i===t)break;const s=this.#e.get(o);s&&(Z(s.effect),this.#e.delete(o))}for(const[i,o]of this.#s){if(i===r||this.#i.has(i))continue;const s=()=>{if(Array.from(this.#t.values()).includes(i)){var a=document.createDocumentFragment();kn(o,a),a.append(Ke()),this.#e.set(i,{effect:o,fragment:a})}else Z(o);this.#i.delete(i),this.#s.delete(i)};this.#o||!n?(this.#i.add(i),Be(o,s,!1)):s()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,l]of this.#e)r.includes(n)||(Z(l.effect),this.#e.delete(n))};ensure(t,r){var n=R,l=vn();if(r&&!this.#s.has(t)&&!this.#e.has(t))if(l){var i=document.createDocumentFragment(),o=Ke();i.append(o),this.#e.set(t,{effect:se(()=>r(o)),fragment:i})}else this.#s.set(t,se(()=>r(this.anchor)));if(this.#t.set(n,t),l){for(const[s,f]of this.#s)s===t?n.unskip_effect(f):n.skip_effect(f);for(const[s,f]of this.#e)s===t?n.unskip_effect(f.effect):n.skip_effect(f.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function Te(e,t,r=!1){var n=new vi(e),l=r?tt:0;function i(o,s){n.ensure(o,s)}br(()=>{var o=!1;t((s,f=0)=>{o=!0,i(f,s)}),o||i(!1,null)},l)}function Ln(e,t){return t}function hi(e,t,r){for(var n=[],l=t.length,i,o=t.length,s=0;s<l;s++){let u=t[s];Be(u,()=>{if(i){if(i.pending.delete(u),i.done.add(u),i.pending.size===0){var d=e.outrogroups;Sr(It(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=n.length===0&&r!==null;if(f){var a=r,h=a.parentNode;Bl(h),h.append(a),e.items.clear()}Sr(t,!f)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function Sr(e,t=!0){for(var r=0;r<e.length;r++)Z(e[r],t)}var qn;function Un(e,t,r,n,l,i=null){var o=e,s=new Map;{var f=e;o=f.appendChild(Ke())}var a=null,h=vr(()=>{var w=r();return rr(w)?w:w==null?[]:It(w)}),u,d=!0;function m(){_.fallback=a,mi(_,u,o,t,n),a!==null&&(u.length===0?(a.f&Re)===0?yr(a):(a.f^=Re,xt(a,null,o)):Be(a,()=>{a=null}))}var c=br(()=>{u=v(h);for(var w=u.length,T=new Set,x=R,H=vn(),z=0;z<w;z+=1){var re=u[z],ye=n(re,z),$=d?null:s.get(ye);$?($.v&&st($.v,re),$.i&&st($.i,z),H&&x.unskip_effect($.e)):($=pi(s,d?o:qn??=Ke(),re,ye,z,l,t,r),d||($.e.f|=Re),s.set(ye,$)),T.add(ye)}if(w===0&&i&&!a&&(d?a=se(()=>i(o)):(a=se(()=>i(qn??=Ke())),a.f|=Re)),w>T.size&&ol(),!d)if(H){for(const[ne,Et]of s)T.has(ne)||x.skip_effect(Et.e);x.oncommit(m),x.ondiscard(()=>{})}else m();v(h)}),_={effect:c,items:s,outrogroups:null,fallback:a};d=!1}function wt(e){for(;e!==null&&(e.f&de)===0;)e=e.next;return e}function mi(e,t,r,n,l){var i=t.length,o=e.items,s=wt(e.effect.first),f,a=null,h=[],u=[],d,m,c,_;for(_=0;_<i;_+=1){if(d=t[_],m=l(d,_),c=o.get(m).e,e.outrogroups!==null)for(const ne of e.outrogroups)ne.pending.delete(c),ne.done.delete(c);if((c.f&Re)!==0)if(c.f^=Re,c===s)xt(c,null,r);else{var w=a?a.next:s;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),Oe(e,a,c),Oe(e,c,w),xt(c,w,r),a=c,h=[],u=[],s=wt(a.next);continue}if((c.f&Q)!==0&&yr(c),c!==s){if(f!==void 0&&f.has(c)){if(h.length<u.length){var T=u[0],x;a=T.prev;var H=h[0],z=h[h.length-1];for(x=0;x<h.length;x+=1)xt(h[x],T,r);for(x=0;x<u.length;x+=1)f.delete(u[x]);Oe(e,H.prev,z.next),Oe(e,a,H),Oe(e,z,T),s=T,a=z,_-=1,h=[],u=[]}else f.delete(c),xt(c,s,r),Oe(e,c.prev,c.next),Oe(e,c,a===null?e.effect.first:a.next),Oe(e,a,c),a=c;continue}for(h=[],u=[];s!==null&&s!==c;)(f??=new Set).add(s),u.push(s),s=wt(s.next);if(s===null)continue}(c.f&Re)===0&&h.push(c),a=c,s=wt(c.next)}if(e.outrogroups!==null){for(const ne of e.outrogroups)ne.pending.size===0&&(Sr(It(ne.done)),e.outrogroups?.delete(ne));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||f!==void 0){var re=[];if(f!==void 0)for(c of f)(c.f&Q)===0&&re.push(c);for(;s!==null;)(s.f&Q)===0&&s!==e.fallback&&re.push(s),s=wt(s.next);var ye=re.length;if(ye>0){var $=i===0?r:null;hi(e,re,$)}}}function pi(e,t,r,n,l,i,o,s){var f=(o&pl)!==0?(o&bl)===0?q(r,!1,!1):Ve(r):null,a=(o&_l)!==0?Ve(l):null;return{v:f,i:a,e:se(()=>(i(t,f??r,a??l,s),()=>{e.delete(n)}))}}function xt(e,t,r){if(e.nodes)for(var n=e.nodes.start,l=e.nodes.end,i=t&&(t.f&Re)===0?t.nodes.start:r;n!==null;){var o=bt(n);if(i.before(n),n===l)return;n=o}}function Oe(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function _i(e,t,r=!1,n=!1,l=!1){var i=e,o="";G(()=>{var s=C;if(o!==(o=t()??"")&&(s.nodes!==null&&(wn(s.nodes.start,s.nodes.end),s.nodes=null),o!=="")){var f=o+"";r?f=`<svg>${f}</svg>`:n&&(f=`<math>${f}</math>`);var a=zn(f);if((r||n)&&(a=Ne(a)),Er(Ne(a),a.lastChild),r||n)for(;Ne(a);)i.before(Ne(a));else i.before(a)}})}function jn(e,t){Zl(()=>{var r=e.getRootNode(),n=r.host?r:r.head??r.ownerDocument.head;if(!n.querySelector("#"+t.hash)){const l=hn("style");l.id=t.hash,l.textContent=t.code,n.appendChild(l)}})}const bi=Symbol("is custom element"),gi=Symbol("is html");function B(e,t,r,n){var l=yi(e);l[t]!==(l[t]=r)&&(t==="loading"&&(e[ll]=r),r==null?e.removeAttribute(t):typeof r!="string"&&wi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function yi(e){return e.__attributes??={[bi]:e.nodeName.includes("-"),[gi]:e.namespaceURI===Wr}}var Hn=new Map;function wi(e){var t=e.getAttribute("is")||e.nodeName,r=Hn.get(t);if(r)return r;Hn.set(t,r=[]);for(var n,l=e,i=Element.prototype;i!==l;){n=zr(l);for(var o in n)n[o].set&&r.push(o);l=nr(l)}return r}function Ae(e,t,r=t){var n=new WeakSet;Yl(e,"input",async l=>{var i=l?e.defaultValue:e.value;if(i=kr(e)?Tr(i):i,r(i),R!==null&&n.add(R),await ri(),i!==(i=t())){var o=e.selectionStart,s=e.selectionEnd,f=e.value.length;if(e.value=i??"",s!==null){var a=e.value.length;o===s&&s===f&&a>f?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=o,e.selectionEnd=Math.min(s,a))}}}),b(t)==null&&e.value&&(r(kr(e)?Tr(e.value):e.value),R!==null&&n.add(R)),gn(()=>{var l=t();if(e===document.activeElement){var i=ur??R;if(n.has(i))return}kr(e)&&l===Tr(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function kr(e){var t=e.type;return t==="number"||t==="range"}function Tr(e){return e===""?null:+e}function Vn(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}function Kn(e=!1){const t=M,r=t.l.u;if(!r)return;let n=()=>D(t.s);if(e){let l=0,i={};const o=Pt(()=>{let s=!1;const f=t.s;for(const a in f)f[a]!==i[a]&&(i[a]=f[a],s=!0);return s&&l++,l});n=()=>v(o)}r.b.length&&$l(()=>{Bn(t,n),lr(r.b)}),_r(()=>{const l=b(()=>r.m.map(rl));return()=>{for(const i of l)typeof i=="function"&&i()}}),r.a.length&&_r(()=>{Bn(t,n),lr(r.a)})}function Bn(e,t){if(e.l.s)for(const r of e.l.s)v(r);t()}let qt=!1;function xi(e){var t=qt;try{return qt=!1,[e(),qt]}finally{qt=t}}function te(e,t,r,n){var l=!lt||(r&gl)!==0,i=(r&wl)!==0,o=n,s=!0,f=()=>(s&&(s=!1,o=n),o),a;{var h=nt in e||nl in e;a=et(e,t)?.set??(h&&t in e?x=>e[t]=x:void 0)}var u,d=!1;[u,d]=xi(()=>e[t]),u===void 0&&n!==void 0&&(u=f(),a&&(l&&cl(),a(u)));var m;if(l?m=()=>{var x=e[t];return x===void 0?f():(s=!0,x)}:m=()=>{var x=e[t];return x!==void 0&&(o=void 0),x===void 0?o:x},l&&(r&yl)===0)return m;if(a){var c=e.$$legacy;return(function(x,H){return arguments.length>0?((!l||!H||c||d)&&a(H?m():x),x):m()})}var _=!1,w=vr(()=>(_=!1,m()));v(w);var T=C;return(function(x,H){if(arguments.length>0){const z=H?v(w):l&&i?at(x):x;return E(w,z),_=!0,o!==void 0&&(o=z),x}return Pe&&_||(T.f&Se)!==0?w.v:v(w)})}function Ei(e){M===null&&Br(),lt&&M.l!==null?Ti(M).m.push(e):_r(()=>{const t=b(e);if(typeof t=="function")return t})}function Si(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function ki(){const e=M;return e===null&&Br(),(t,r,n)=>{const l=e.s.$$events?.[t];if(l){const i=rr(l)?l.slice():[l],o=Si(t,r,n);for(const s of i)s.call(e.x,o);return!o.defaultPrevented}return!0}}function Ti(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ai="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ai),Tl();const Ci={"zh-cn":{comments:{name:"昵称",email:"邮箱",site:"网站",required:"必填",optional:"选填",welcome:"欢迎评论",comments:"条评论",cancel:"取消",send:"发送",sending:"发送中...",reply:"回复",replyPlaceholder:"写下你的回复...",loadMore:"加载更多",loading:"正在加载评论...",loadFailed:"加载失败",submitSuccess:"提交成功",submitFailed:"提交失败，请稍后再试",fillRequired:"请填写昵称、邮箱和评论内容",confirmDelete:"确定要删除这条评论吗？",delete:"删除",deleteSuccess:"删除成功",deleteFailed:"删除失败",deleteError:"删除评论失败",characters:"字符",words:"单词",contentTooLong:"评论内容超出限制：不超过2000字或1000单词"}},en:{comments:{name:"Name",email:"Email",site:"Website",required:"Required",optional:"Optional",welcome:"Welcome to comment",comments:"Comments",cancel:"Cancel",send:"Send",sending:"Sending...",reply:"Reply",replyPlaceholder:"Write your reply...",loadMore:"Load more",loading:"Loading comments...",loadFailed:"Failed to load",submitSuccess:"Submitted successfully",submitFailed:"Submission failed, please try again later",fillRequired:"Please fill in name, email and comment content",confirmDelete:"Are you sure you want to delete this comment?",delete:"Delete",deleteSuccess:"Successfully deleted",deleteFailed:"Failed to delete",deleteError:"Failed to delete comment",characters:"characters",words:"words",contentTooLong:"Comment content exceeds limit: no more than 2000 characters or 1000 words"}}};function Wn(e){const t=(l,i)=>i.split(".").reduce((o,s)=>o?.[s],Ci[l]),r=l=>t(e,l)||t("zh-cn",l);return(l,i)=>r(l)?.replace(/\{(\w+)\}/g,(o,s)=>String(i?.[s]??s))??l}const Ri=e=>{if(e instanceof Date)return e;const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n)},Fi=e=>e?.replace("_","-")||"en-US";function Di(e){return e.replace(/([\u4e00-\u9fa5])([A-Za-z0-9])/g,"$1 $2").replace(/([A-Za-z0-9])([\u4e00-\u9fa5])/g,"$1 $2")}function Yn(e,t="zh-CN"){const r=Ri(e),n=new Intl.DateTimeFormat(Fi(t),{year:"numeric",month:"short",day:"numeric"}).format(r);return t.startsWith("zh")?Di(n):n}var Ii=U('<a target="_blank" class="comment-avatar-link svelte-brdrbr"><img alt="avatar" class="comment-avatar svelte-brdrbr"/></a>'),Mi=U('<img alt="avatar" class="comment-avatar svelte-brdrbr"/>'),Ni=U('<div class="html-content svelte-brdrbr"><!></div>'),Pi=U('<p class="text-content svelte-brdrbr"> </p>'),Oi=U('<p class="text-content svelte-brdrbr"> </p>'),zi=U('<p class="text-content empty-text svelte-brdrbr"> </p>'),Li=U('<button class="action-link svelte-brdrbr"> </button>'),qi=U('<span class="error-text svelte-brdrbr"> </span>'),Ui=U('<div class="reply-form-wrapper svelte-brdrbr"><form class="reply-form svelte-brdrbr"><div class="reply-grid svelte-brdrbr"><div class="form-group"><label class="reply-label svelte-brdrbr"> <span class="required svelte-brdrbr">*</span></label> <input type="text" class="reply-input svelte-brdrbr"/></div> <div class="form-group"><label class="reply-label svelte-brdrbr"> <span class="required svelte-brdrbr">*</span></label> <input type="email" class="reply-input svelte-brdrbr"/></div> <div class="form-group"><label class="reply-label svelte-brdrbr"> </label> <input type="url" class="reply-input svelte-brdrbr"/></div></div> <div class="reply-textarea-container"><textarea class="reply-textarea svelte-brdrbr"></textarea> <div class="reply-footer-info svelte-brdrbr"><!></div></div> <div class="reply-buttons svelte-brdrbr"><button type="button" class="btn-cancel svelte-brdrbr"> </button> <button type="submit" class="btn-submit-reply svelte-brdrbr"> </button></div></form></div>'),ji=U('<div class="nested-item svelte-brdrbr"><!></div>'),Hi=U('<div class="nested-replies svelte-brdrbr"></div>'),Vi=U('<div class="comment-item-container svelte-brdrbr"><!> <div class="comment-main svelte-brdrbr"><div class="comment-header svelte-brdrbr"><span class="comment-author svelte-brdrbr"> </span> <span class="comment-date svelte-brdrbr"> </span></div> <div class="comment-content svelte-brdrbr"><!></div> <div class="comment-actions svelte-brdrbr"><button class="action-link svelte-brdrbr"> </button> <!></div> <!> <!></div></div>');const Ki={hash:"svelte-brdrbr",code:".comment-item-container.svelte-brdrbr {display:flex;gap:0.75rem;width:100%;max-width:100%;}.comment-avatar-link.svelte-brdrbr, .comment-avatar.svelte-brdrbr {width:2.5rem;height:2.5rem;flex-shrink:0;}.comment-avatar.svelte-brdrbr {border-radius:0.25rem;object-fit:cover;}.comment-main.svelte-brdrbr {flex:1;min-width:0;}.comment-header.svelte-brdrbr {display:flex;align-items:center;gap:0.5rem;}.comment-author.svelte-brdrbr {font-weight:600;color:var(--text-color);}.comment-date.svelte-brdrbr {font-size:0.875rem;color:color-mix(in srgb, var(--text-color) 80%, transparent);}.comment-content.svelte-brdrbr {margin-top:0.25rem;color:var(--text-color);line-height:1.625;width:100%;max-width:100%;min-width:0;}.html-content.svelte-brdrbr, .text-content.svelte-brdrbr {word-wrap:break-word;word-break:break-word;max-width:100%;}.text-content.svelte-brdrbr {white-space:pre-wrap;overflow:hidden;margin:0;}.empty-text.svelte-brdrbr {color:color-mix(in srgb, var(--text-color) 50%, transparent);}.comment-actions.svelte-brdrbr {margin-top:0.25rem;display:flex;align-items:center;gap:1rem;font-size:0.875rem;color:var(--text-color);}.action-link.svelte-brdrbr {background:none;border:none;padding:0;cursor:pointer;color:inherit;font-size:inherit;}.action-link.svelte-brdrbr:hover {color:var(--link-color);}.reply-form-wrapper.svelte-brdrbr {margin-top:1rem;padding-left:1rem;border-left:2px solid #e5e7eb;}.reply-form.svelte-brdrbr {display:flex;flex-direction:column;gap:0.75rem;}.reply-grid.svelte-brdrbr {display:grid;grid-template-columns:repeat(3, minmax(0, 1fr));gap:0.5rem;}.reply-label.svelte-brdrbr {display:block;font-size:0.75rem;color:var(--text-color);margin-bottom:0.25rem;}.required.svelte-brdrbr {color:#ef4444;}.reply-input.svelte-brdrbr, .reply-textarea.svelte-brdrbr {width:100%;border-radius:0.25rem;color:var(--text-color);border:1px solid var(--button-border-color);font-size:0.875rem;background:transparent;box-sizing:border-box;font-family:inherit;}.reply-input.svelte-brdrbr:focus, .reply-textarea.svelte-brdrbr:focus {outline:none;border-color:var(--link-color);}.reply-input.svelte-brdrbr {padding:0.25rem;}.reply-textarea.svelte-brdrbr {padding:0.5rem;min-height:80px;resize:vertical;}.reply-footer-info.svelte-brdrbr {text-align:right;font-size:0.75rem;color:color-mix(in srgb, var(--text-color) 80%, transparent);margin-top:0.25rem;}.error-text.svelte-brdrbr {color:#ef4444;margin-left:0.5rem;}.reply-buttons.svelte-brdrbr {display:flex;justify-content:flex-end;gap:0.5rem;}.btn-cancel.svelte-brdrbr, .btn-submit-reply.svelte-brdrbr {border-radius:0.25rem;padding:0.25rem 0.75rem;font-size:0.875rem;border:1px solid var(--button-border-color);background:transparent;color:var(--text-color);cursor:pointer;}.btn-submit-reply.svelte-brdrbr {font-weight:500;}.btn-cancel.svelte-brdrbr:hover, .btn-submit-reply.svelte-brdrbr:hover:not(:disabled) {background-color:var(--button-hover-bg-color);}.btn-submit-reply.svelte-brdrbr:disabled {opacity:0.5;cursor:not-allowed;}.nested-replies.svelte-brdrbr {padding-left:1.5rem;margin-top:1rem;border-left:1px solid color-mix(in srgb, var(--text-color) 50%, transparent);display:flex;flex-direction:column;gap:1rem;width:100%;}.nested-item.svelte-brdrbr {width:100%;max-width:100%;overflow:hidden;}"};function Gn(e,t){sr(t,!1),jn(e,Ki);let r=te(t,"c",8),n=te(t,"postSlug",8),l=te(t,"replyingToId",8,null),i=te(t,"author",8,""),o=te(t,"email",8,""),s=te(t,"url",8,""),f=te(t,"language",8,"zh-cn"),a=te(t,"apiUrl",8),h=te(t,"adminKey",8,"");const u=Wn(f());let d=q(""),m=q(""),c=q(""),_=q(""),w=q(!1);const T=ki(),x=r().avatar;function H(y){const S=y.length,P=y.trim()?y.trim().split(/\s+/).length:0;return{chars:S,words:P}}function z(y){const{chars:S,words:P}=H(y);return S<=2e3&&P<=1e3}function re(y){return!y.includes("<")||!y.includes(">")?!1:/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i.test(y)}async function ye(){if(h()&&confirm(u("comments.confirmDelete")))try{if(!(await fetch(`${a()}/api/comments/delete?id=${r().id}`,{method:"DELETE",headers:{Authorization:h()}})).ok)throw new Error("delete failed");alert(u("comments.deleteSuccess")),T("delete",r().id)}catch{alert(u("comments.deleteError"))}}Kn();var $=Vi(),ne=g($);{var Et=y=>{var S=Ii(),P=g(S);G(()=>{B(S,"href",(D(r()),b(()=>r().url))),B(P,"src",x)}),j(y,S)},Ar=y=>{var S=Mi();G(()=>B(S,"src",x)),j(y,S)};Te(ne,y=>{D(r()),b(()=>r().url)?y(Et):y(Ar,!1)})}var St=F(ne,2),$e=g(St),kt=g($e),Cr=g(kt),Ut=F(kt,2),jt=g(Ut),Tt=F($e,2),Ht=g(Tt);{var Vt=y=>{var S=Ni(),P=g(S);_i(P,()=>(D(r()),b(()=>r().contentHtml))),j(y,S)},Kt=pt(()=>(D(r()),b(()=>r().contentHtml&&typeof r().contentHtml=="string"&&re(r().contentHtml)))),Bt=y=>{var S=Pi(),P=g(S);G(()=>N(P,(D(r()),b(()=>r().contentText)))),j(y,S)},Rr=pt(()=>(D(r()),b(()=>r().contentText&&typeof r().contentText=="string"&&r().contentText.trim()!==""))),Wt=y=>{var S=Oi(),P=g(S);G(()=>N(P,(D(r()),b(()=>r().contentHtml)))),j(y,S)},Yt=pt(()=>(D(r()),b(()=>r().contentHtml&&typeof r().contentHtml=="string"&&r().contentHtml.trim()!==""))),Gt=y=>{var S=zi(),P=g(S);G(we=>N(P,we),[()=>b(()=>u("comments.noContent"))]),j(y,S)};Te(Ht,y=>{v(Kt)?y(Vt):v(Rr)?y(Bt,1):v(Yt)?y(Wt,2):y(Gt,!1)})}var $t=F(Tt,2),ut=g($t),Fr=g(ut),Jt=F(ut,2);{var Dr=y=>{var S=Li(),P=g(S);G(we=>N(P,we),[()=>b(()=>u("comments.delete"))]),Ge("click",S,ye),j(y,S)};Te(Jt,y=>{h()&&y(Dr)})}var At=F($t,2);{var Zt=y=>{var S=Ui(),P=g(S),we=g(P),Je=g(we),Ze=g(Je),xe=g(Ze),Ct=F(Ze,2),er=F(Je,2),Rt=g(er),Ir=g(Rt),Ft=F(Rt,2),Mr=F(er,2),p=g(Mr),A=g(p),I=F(p,2),W=F(we,2),ce=g(W),_e=F(ce,2),Xe=g(_e);{var le=ie=>{var tr=qi(),Pr=g(tr);G(Or=>N(Pr,Or),[()=>b(()=>u("comments.contentTooLong"))]),j(ie,tr)},ze=pt(()=>(v(_),b(()=>!z(v(_)))));Te(Xe,ie=>{v(ze)&&ie(le)})}var Ce=F(W,2),Dt=g(Ce),Nr=g(Dt),Jn=F(Dt,2),Qi=g(Jn);G((ie,tr,Pr,Or,eo,to,ro,no,lo,io)=>{B(Ze,"for",`reply-author-${D(r()),b(()=>r().id)??""}`),N(xe,ie),B(Ct,"id",`reply-author-${D(r()),b(()=>r().id)??""}`),B(Ct,"placeholder",tr),B(Rt,"for",`reply-email-${D(r()),b(()=>r().id)??""}`),N(Ir,Pr),B(Ft,"id",`reply-email-${D(r()),b(()=>r().id)??""}`),B(Ft,"placeholder",Or),B(p,"for",`reply-url-${D(r()),b(()=>r().id)??""}`),N(A,eo),B(I,"id",`reply-url-${D(r()),b(()=>r().id)??""}`),B(I,"placeholder",to),B(ce,"placeholder",ro),N(Nr,no),Jn.disabled=lo,N(Qi,io)},[()=>b(()=>u("comments.name")),()=>b(()=>u("comments.required")),()=>b(()=>u("comments.email")),()=>b(()=>u("comments.required")),()=>b(()=>u("comments.site")),()=>b(()=>u("comments.optional")),()=>b(()=>u("comments.replyPlaceholder")),()=>b(()=>u("comments.cancel")),()=>(v(w),v(_),b(()=>v(w)||!z(v(_)))),()=>(v(w),b(()=>v(w)?u("comments.sending"):u("comments.reply")))]),Ae(Ct,()=>v(d),ie=>E(d,ie)),Ae(Ft,()=>v(m),ie=>E(m,ie)),Ae(I,()=>v(c),ie=>E(c,ie)),Ae(ce,()=>v(_),ie=>E(_,ie)),Ge("click",Dt,()=>{T("cancel"),E(w,!1)}),Ge("submit",P,Vn(()=>{if(!v(w)){if(!v(d)||!v(m)||!v(_)){alert(u("comments.fillRequired"));return}if(!z(v(_))){alert(u("comments.contentTooLong"));return}E(w,!0),T("submit",{parentId:r().id,author:v(d),email:v(m),url:v(c),content:v(_),post_url:window.location.href}),E(_,"")}})),j(y,S)};Te(At,y=>{D(l()),D(r()),b(()=>l()===r().id)&&y(Zt)})}var Xt=F(At,2);{var Qt=y=>{var S=Hi();Un(S,5,()=>(D(r()),b(()=>r().replies)),Ln,(P,we)=>{var Je=ji(),Ze=g(Je);Gn(Ze,{get c(){return v(we)},get postSlug(){return n()},get author(){return i()},get email(){return o()},get url(){return s()},get language(){return f()},get apiUrl(){return a()},get adminKey(){return h()},get replyingToId(){return l()},$$events:{reply:xe=>T("reply",xe.detail),cancel:()=>T("cancel"),submit:xe=>T("submit",xe.detail),delete:xe=>T("delete",xe.detail)}}),j(P,Je)}),j(y,S)};Te(Xt,y=>{D(r()),b(()=>r().replies&&r().replies.length)&&y(Qt)})}G((y,S)=>{N(Cr,(D(r()),b(()=>r().author))),N(jt,y),N(Fr,S)},[()=>(D(Yn),D(r()),D(f()),b(()=>Yn(new Date(r().pubDate),f()))),()=>b(()=>u("comments.reply"))]),Ge("click",ut,()=>{T("reply",r().id),E(d,i()),E(m,o()),E(c,s())}),j(e,$),ar()}var Bi=U('<span class="error-text svelte-167h4u7"> </span>'),Wi=U('<p class="status-message svelte-167h4u7"> </p>'),Yi=U('<p class="status-message error svelte-167h4u7"> </p>'),Gi=U('<div class="load-more-wrapper svelte-167h4u7"><button class="btn-load-more svelte-167h4u7"> </button></div>'),$i=U('<h4 class="comments-count svelte-167h4u7"> </h4> <div class="comments-list svelte-167h4u7"></div> <!>',1),Ji=U('<div class="comment-container svelte-167h4u7"><div class="comment-form-wrapper svelte-167h4u7"><form class="comment-form svelte-167h4u7"><div class="form-grid svelte-167h4u7"><div class="form-group"><label for="author" class="form-label svelte-167h4u7"> <span class="required svelte-167h4u7">*</span></label> <input id="author" type="text" class="form-input svelte-167h4u7"/></div> <div class="form-group"><label for="email" class="form-label svelte-167h4u7"> <span class="required svelte-167h4u7">*</span></label> <input id="email" type="email" class="form-input svelte-167h4u7"/></div> <div class="form-group"><label for="url" class="form-label svelte-167h4u7"> </label> <input id="url" type="url" class="form-input svelte-167h4u7"/></div></div> <div class="form-group"><label for="admin-key" class="form-label svelte-167h4u7">管理员 Key</label> <input id="admin-key" type="password" placeholder="仅管理员使用" class="form-input svelte-167h4u7"/></div> <div class="textarea-wrapper"><textarea class="form-textarea svelte-167h4u7"></textarea> <div class="textarea-footer svelte-167h4u7"><!></div></div> <div class="form-footer svelte-167h4u7"><button type="submit" class="btn-submit svelte-167h4u7"> </button></div></form></div> <div class="comment-list-wrapper"><!></div></div>');const Zi={hash:"svelte-167h4u7",code:`.comment-container.svelte-167h4u7 {--text-color: var(--momo-text-color, #000000);--button-border-color: var(--momo-button-border-color, #e5e5e5);--button-hover-bg-color: var(--momo-button-hover-bg-color, #f5f5f5);--link-color: var(--momo-link-color, #003b6e);}[data-theme="dark"] .comment-container.svelte-167h4u7 {--text-color: var(--momo-text-color, #ffffff);--button-border-color: var(--momo-button-border-color, #3d3d3d);--button-hover-bg-color: var(--momo-button-hover-bg-color, #262626);--link-color: var(--momo-link-color, #57ace7);}.comment-container.svelte-167h4u7 {margin-left:auto;margin-right:auto;}.comment-form-wrapper.svelte-167h4u7 {margin-top:1rem;}.comment-form.svelte-167h4u7 {display:flex;flex-direction:column;gap:1rem;}.form-grid.svelte-167h4u7 {display:grid;grid-template-columns:repeat(3, minmax(0, 1fr));gap:0.75rem;}.form-label.svelte-167h4u7 {display:block;font-size:0.875rem;color:var(--text-color);margin-bottom:0.25rem;}.required.svelte-167h4u7 {color:#ef4444;}.form-input.svelte-167h4u7, .form-textarea.svelte-167h4u7 {width:100%;border-radius:0.25rem;color:var(--text-color);border:1px solid var(--button-border-color);font-size:0.875rem;background:transparent;box-sizing:border-box;font-family:inherit;}.form-input.svelte-167h4u7::placeholder,
.form-textarea.svelte-167h4u7::placeholder {color:color-mix(in srgb, var(--text-color) 50%, transparent);}.form-input.svelte-167h4u7:focus, .form-textarea.svelte-167h4u7:focus {outline:none;border-color:var(--link-color);}.form-input.svelte-167h4u7 {padding:0.5rem;}.form-textarea.svelte-167h4u7 {padding:0.75rem;min-height:100px;resize:vertical;}.textarea-footer.svelte-167h4u7 {text-align:right;font-size:0.875rem;color:color-mix(in srgb, var(--text-color) 80%, transparent);margin-top:0.25rem;}.error-text.svelte-167h4u7 {color:#ef4444;margin-left:0.5rem;}.form-footer.svelte-167h4u7 {display:flex;justify-content:flex-end;gap:0.75rem;}.btn-submit.svelte-167h4u7 {border-radius:0.25rem;padding:0.5rem 1rem;font-size:0.875rem;font-weight:500;color:var(--text-color);border:1px solid var(--button-border-color);background:transparent;cursor:pointer;transition:background-color 0.2s;}.btn-submit.svelte-167h4u7:hover {background-color:var(--button-hover-bg-color);}.comments-count.svelte-167h4u7 {color:var(--text-color);font-size:1rem;font-weight:600;margin-bottom:1rem;}.comments-list.svelte-167h4u7 {display:flex;flex-direction:column;gap:1.5rem;}.status-message.svelte-167h4u7 {color:var(--text-color);text-align:center;}.status-message.error.svelte-167h4u7 {color:#ef4444;}.load-more-wrapper.svelte-167h4u7 {display:flex;justify-content:center;margin-top:1.5rem;}.btn-load-more.svelte-167h4u7 {background:none;border:none;color:#4f46e5;font-size:0.875rem;cursor:pointer;text-decoration:none;}.btn-load-more.svelte-167h4u7:hover {text-decoration:underline;}`};function Xi(e,t){sr(t,!1),jn(e,Zi);let r=te(t,"postSlug",8),n=te(t,"language",8,"zh-cn"),l=te(t,"postTitle",8),i=te(t,"apiUrl",8);const o=Wn(n());let s=q([]),f=q(!0),a=q(""),h=q(1),u=20,d=q(!1),m=q(""),c=q(""),_=q(""),w=q(""),T=q(!1),x=q(null),H=q("");const z="momo_comment_user_info",re="momo_comment_admin_key";function ye(){try{const p=localStorage.getItem(z);if(p){const A=JSON.parse(p);E(m,A.author||""),E(c,A.email||""),E(_,A.url||"")}}catch(p){console.warn("Failed to load user info from localStorage:",p)}}function $(){try{const p={author:v(m),email:v(c),url:v(_)};localStorage.setItem(z,JSON.stringify(p))}catch(p){console.warn("Failed to save user info to localStorage:",p)}}function ne(){try{const p=localStorage.getItem(re);p&&E(H,p)}catch(p){console.warn("Failed to load admin key from localStorage:",p)}}function Et(){try{localStorage.setItem(re,v(H))}catch(p){console.warn("Failed to save admin key to localStorage:",p)}}function Ar(p){const A=p.length,I=p.trim()?p.trim().split(/\s+/).length:0;return{chars:A,words:I}}function St(p){const{chars:A,words:I}=Ar(p);return A<=2e3&&I<=1e3}async function $e(){E(f,!0);try{const p=await fetch(`${i()}/api/comments?post_slug=${encodeURIComponent(r())}&nested=true&page=${v(h)}&limit=${u}`);if(!p.ok)throw new Error(o("comments.loadFailed"));const A=await p.json();E(s,A.data),E(d,A.pagination.total>v(h)*u)}catch(p){E(a,p.message)}finally{E(f,!1)}}async function kt(p=null,A=null){if(v(T))return;let I,W,ce,_e;if(A?(I=A.author,W=A.email,ce=A.url,_e=A.content):(I=v(m),W=v(c),ce=v(_),_e=v(w)),!I||!W||!_e){alert(o("comments.fillRequired"));return}if(!St(_e)){alert(o("comments.contentTooLong"));return}p||E(T,!0);try{const le=await(await fetch(`${i()}/api/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post_slug:r(),author:I,email:W,url:ce||null,content:_e,parent_id:p,post_url:window.location.href,post_title:l()})})).json();alert(le.message||o("comments.submitSuccess")),A||(E(w,""),$()),E(x,null),await $e()}catch{alert(o("comments.submitFailed"))}finally{p||E(T,!1)}}async function Cr(p){await $e()}function Ut(p){E(x,p)}Ei(()=>{ye(),ne(),$e()}),Kn();var jt=Ji(),Tt=g(jt),Ht=g(Tt),Vt=g(Ht),Kt=g(Vt),Bt=g(Kt),Rr=g(Bt),Wt=F(Bt,2),Yt=F(Kt,2),Gt=g(Yt),$t=g(Gt),ut=F(Gt,2),Fr=F(Yt,2),Jt=g(Fr),Dr=g(Jt),At=F(Jt,2),Zt=F(Vt,2),Xt=F(g(Zt),2),Qt=F(Zt,2),y=g(Qt),S=F(y,2),P=g(S);{var we=p=>{var A=Bi(),I=g(A);G(W=>N(I,W),[()=>b(()=>o("comments.contentTooLong")||"内容超出限制")]),j(p,A)},Je=pt(()=>(v(w),b(()=>!St(v(w)))));Te(P,p=>{v(Je)&&p(we)})}var Ze=F(Qt,2),xe=g(Ze),Ct=g(xe),er=F(Tt,2),Rt=g(er);{var Ir=p=>{var A=Wi(),I=g(A);G(W=>N(I,W),[()=>b(()=>o("comments.loading"))]),j(p,A)},Ft=p=>{var A=Yi(),I=g(A);G(W=>N(I,`${W??""}${v(a)??""}`),[()=>b(()=>o("comments.loadFailed"))]),j(p,A)},Mr=p=>{var A=$i(),I=Kl(A),W=g(I),ce=F(I,2);Un(ce,5,()=>v(s),Ln,(le,ze)=>{Gn(le,{get c(){return v(ze)},get postSlug(){return r()},get author(){return v(m)},get email(){return v(c)},get url(){return v(_)},get language(){return n()},get apiUrl(){return i()},get adminKey(){return v(H)},get replyingToId(){return v(x)},$$events:{reply:Ce=>Ut(Ce.detail),cancel:()=>Ut(null),submit:async Ce=>{await kt(Ce.detail.parentId,Ce.detail)},delete:Cr}})});var _e=F(ce,2);{var Xe=le=>{var ze=Gi(),Ce=g(ze),Dt=g(Ce);G(Nr=>N(Dt,Nr),[()=>b(()=>o("comments.loadMore"))]),Ge("click",Ce,()=>{Hl(h),$e()}),j(le,ze)};Te(_e,le=>{v(d)&&le(Xe)})}G(le=>N(W,`${v(s),b(()=>v(s).length)??""} ${le??""}`),[()=>b(()=>o("comments.comments"))]),j(p,A)};Te(Rt,p=>{v(f)?p(Ir):v(a)?p(Ft,1):p(Mr,!1)})}G((p,A,I,W,ce,_e,Xe,le,ze)=>{N(Rr,p),B(Wt,"placeholder",A),N($t,I),B(ut,"placeholder",W),N(Dr,ce),B(At,"placeholder",_e),B(y,"placeholder",Xe),xe.disabled=le,N(Ct,ze)},[()=>b(()=>o("comments.name")),()=>b(()=>o("comments.required")),()=>b(()=>o("comments.email")),()=>b(()=>o("comments.required")),()=>b(()=>o("comments.site")),()=>b(()=>o("comments.optional")),()=>b(()=>o("comments.welcome")),()=>(v(T),v(w),b(()=>v(T)||!St(v(w)))),()=>(v(T),b(()=>v(T)?o("comments.sending"):o("comments.send")))]),Ae(Wt,()=>v(m),p=>E(m,p)),Ae(ut,()=>v(c),p=>E(c,p)),Ae(At,()=>v(_),p=>E(_,p)),Ae(Xt,()=>v(H),p=>E(H,p)),Ge("input",Xt,Et),Ae(y,()=>v(w),p=>E(w,p)),Ge("submit",Ht,Vn(()=>kt())),j(e,jt),ar()}const $n={init:e=>{const t=document.querySelector(e.el);if(!t){console.error(`Target element ${e.el} not found.`);return}ui(Xi,{target:t,props:{apiUrl:e.apiUrl,postSlug:e.slugId,language:e.lang||"zh-cn",postTitle:e.title||document.title}})}};return window.momo=$n,$n})();
